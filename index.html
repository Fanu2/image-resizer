<!DOCTYPE html>
<html>
<head>
  <title>Pica Resizer</title>
  <script src="https://unpkg.com/pica/dist/pica.min.js"></script>
</head>
<body>
  <h2>Resize an image with Pica</h2>
  <input type="file" id="fileInput"><br><br>
  <canvas id="canvas" style="border:1px solid #ccc;"></canvas>
  <br><a id="download" download="resized.png">Download Resized Image</a>

  <script>
    const input = document.getElementById('fileInput');
    const canvas = document.getElementById('canvas');
    const download = document.getElementById('download');
    const picaResizer = pica();

    input.addEventListener('change', async () => {
      const file = input.files[0];
      if (!file) return;

      const img = new Image();
      img.onload = async () => {
        const w = 300;
        const h = Math.floor(img.height * (w / img.width));
        canvas.width = w;
        canvas.height = h;
        await picaResizer.resize(img, canvas);
        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          download.href = url;
        });
      };
      img.src = URL.createObjectURL(file);
    });
  </script>
</body>
</html>
