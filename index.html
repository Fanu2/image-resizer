<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pica Image Resizer</title>
  <script src="https://unpkg.com/pica/dist/pica.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    canvas { border: 1px solid #ccc; margin-top: 10px; display: block; }
    input, button, a { margin-top: 20px; display: block; }
    label { margin-top: 10px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>üñºÔ∏è Pica Image Resizer</h1>

  <label for="fileInput">Choose an image:</label>
  <input type="file" id="fileInput" accept="image/*" />

  <label for="widthInput">Target Width (px):</label>
  <input type="number" id="widthInput" value="300" min="50" step="10" />

  <canvas id="canvas"></canvas>
  <a id="download" download="resized.png" style="display: none;">‚¨áÔ∏è Download Resized Image</a>

  <script>
    const input = document.getElementById('fileInput');
    const widthInput = document.getElementById('widthInput');
    const canvas = document.getElementById('canvas');
    const download = document.getElementById('download');
    const picaResizer = pica();

    input.addEventListener('change', async () => {
      const file = input.files[0];
      if (!file) return;

      const targetWidth = parseInt(widthInput.value, 10);
      if (!targetWidth || targetWidth < 1) {
        alert("Please enter a valid width.");
        return;
      }

      const img = new Image();
      img.onload = async () => {
        const targetHeight = Math.floor(img.height * (targetWidth / img.width));
        canvas.width = targetWidth;
        canvas.height = targetHeight;

        await picaResizer.resize(img, canvas);

        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          download.href = url;
          download.style.display = 'block';
        }, 'image/png');
      };
      img.src = URL.createObjectURL(file);
    });
  </script>
</body>
</html>
